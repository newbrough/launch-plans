{
  "epu": {
    "username": "${epu_username}",
    "groupname": "${epu_groupname}",
    "virtualenv": {
      "path": "/home/${epu_username}/app-venv",
      "python":"${python}",
      "virtualenv":"${virtualenv}",
      "virtualenv_args":"${virtualenv_args}"
    },
    "action": [
      "run"
    ],
    "run_config": {
      "program": "epu-processdispatcher-service",
      "run_directory": "/home/${epu_username}/pd",
      "run_method": "supervised",
      "autorestart": true,
      "config": {
        "server": {
          "amqp": {
            "host": "${rabbitmq_host}",
            "username": "${rabbitmq_username}",
            "password": "${rabbitmq_password}",
            "exchange": "${rabbitmq_exchange}"
          }
        },
        "processdispatcher": {
          "default_user": "${epu_username}",
          "domain_config": {
            "general": {
              "engine_class": "epu.decisionengine.impls.needy.NeedyEngine"
            },
            "health": {
              "monitor_health": false
            },
            "engine_conf": {
                "iaas_site": "${iaas_site}",
                "iaas_allocation": "m1.small",
                "deployable_type": "${worker_deployable_type}"
            }
          },
          "engines": {
            "default": {
              "deployable_type": "${worker_deployable_type}",
              "launch_type": {
                "name": "pyon_single",
                "pyon_directory": "/home/cc/coi-services/",
                "container_args": "--noshell",
                "supd_directory": "/tmp"
              },
              "slots": 100,
              "base_need": 1
            }
          }
        }
      }
    }
  },
  "recipes": [
    "epu"
  ]
}
